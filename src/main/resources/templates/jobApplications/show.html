<!DOCTYPE html>
<html lang="en">
<head th:replace="partials/head :: head ('Job Application')" />
<body class="container row justify-content-evenly">
<th:block th:replace="partials/navbar :: navbar"></th:block>

<!--  LEFT SIDE-->
<div class="card text-center col-8 mt-5 p-4">
<!--  JOB INFO-->
  <div class="align-items-center">
    <img th:src="'//logo.clearbit.com/' + ${jobApp.company} + '.com?size=40'">
  </div>
  <h6 class="text-primary card-title" th:text="${jobApp.title}"></h6>
  <p th:text="${jobApp.description}"></p>
  <div class="d-flex">
    Location: <p th:text="${jobApp.location}" class="fw-bold"></p>
  </div>
  <div class="d-flex">
    Salary: <p th:text="'$' + ${jobApp.salary}" class="fw-bold"></p>
  </div>
  <div class="d-flex">
    Company: <p class="card-text fw-bold" th:text="${jobApp.company}"></p>
  </div>
<!--  NOTES-->
  <div class="card my-2" th:each="note : ${notes}">
    <div class="d-flex row text-start">
      <p class="col-3" th:text="${#dates.format(note.date, 'dd-MM-yyyy')}"></p>
      <h5 class="col-3" th:text="${note.title}"></h5>
      <p class="col-6" th:text="${note.content}"></p>
    </div>
    <div class="d-flex justify-content-end">
        <form th:action="@{/notes/{id}/edit(id = ${note.getNote_id()})}" method="get">
          <button class="btn btn-sm btn-primary m-2">Edit</button>
        </form>
        <form th:action="@{/notes/delete/{id}(id = ${note.getNote_id()})}" method="post">
          <button class="btn btn-sm btn-danger m-2">Delete</button>
        </form>
      </div>
  </div>
</div>
<!--  RIGHT SIDE OF PAGE / BUTTONS -->
<div th:if="${isJobOwner}" class="col-2 mt-5">
  <form th:action="@{/jobApplications/{id}/edit(id=${jobApp.id})}" method="get" class="m-3">
    <button>Edit Job</button>
  </form>
  <form th:action="@{/jobApplications/{id}/delete(id=${jobApp.id})}" method="post" class="m-3">
    <button>Delete Job</button>
  </form>
</div>
</body>
</html>